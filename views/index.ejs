<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Members Only</title>
</head>
<body>
    <h1>Members Only</h1>

    <% if (currentUser) { %>
        <p>Hello, <%= currentUser.first_name %></p>
        <p>Status: <%= currentUser.membership_status ? "Member" : "Non-Member" %></p>
        
        <% if (!currentUser.membership_status) { %>
            <a href="/join">Join the Club</a>
        <% } %>

        <a href="/log-out">Log Out</a>
    <% } else { %>
        <a href="/log-in">Log In</a>
        <a href="/sign-up">Sign Up</a>
    <% } %>

    <hr>
    <h2>Message Board</h2>
    <% if (currentUser) { %>
        <a href="/new-message">Post a New Message</a>
    <% } %>

    <div class="messages-container">
        <% messages.forEach(msg => { %>
            <div class="message-card" style="border: 1px solid #ccc; margin: 10px; padding: 10px;">
                <h3><%= msg.title %></h3>
                <p><%= msg.text %></p>

                <p>
                    <strong>Posted by:</strong>
                    <%= (currentUser && currentUser.membership_status) ? msg.first_name + ' ' + msg.last_name : 'Anonymous' %>
                </p>
                <p><small><%= msg.timestamp %></small></p>

                <% if (currentUser && currentUser.is_admin) { %>
                    <form action="/message/<%= msg.id %>/delete" method="POST">
                        <button type="submit" style="color: red">Delete Message</button>
                    </form>
                <% } %>

            </div>
        <% }) %>
    </div>
</body>
</html>